<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8" />
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<!--手机显示正常的声明-->
		<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
		<title>地图控件</title>
		<style type="text/css">
			html {
				height: 100%
			}
			
			body {
				height: 100%;
				margin: 0px;
				padding: 0px
			}
			
			#allmap {
				height: 100%
			}
			.infoWinBox{
				overflow: auto;
				height: 100%;
			}
			.BMap_bubble_content{
				height: 100% !important;
			}
		</style>

	</head>

	<body>
		<div id="allmap"></div>
		<script src="http://api.map.baidu.com/api?v=3.0&ak=p8o0Z5O9SvVfwPP3z0DlAf2PiWOvKPEv" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript" src="http://api.map.baidu.com/library/LuShu/1.2/src/LuShu_min.js"></script>
		<!--<script src="js/InfoBox.js" type="text/javascript" charset="utf-8"></script>-->
		<script type="text/javascript">
			var map = new BMap.Map("allmap");
			map.enableScrollWheelZoom(true); //默认关闭鼠标缩放。重新设置true

			var point = new BMap.Point(116.417854, 39.921988);
			map.centerAndZoom(point, 15); //定中心

			// 创建标注，将标注添加到地图中
			var marker = new BMap.Marker(point);
			map.addOverlay(marker);
			marker.enableDragging(); //设置可拖拽
			//监听地图点击事件，获取点击的点经纬度
			map.addEventListener('click', function(e) {
				var newOne = new BMap.Point(e.point.lng + "," + e.point.lat);
				console.log(e.point.lng + "," + e.point.lat);
				//		        map.openInfoWindow(BMap.InfoWindow,newOne);
			});
			
			
			//信息窗口
			var infoContent = "<div class='mainContent'><p>初始化的内容</p><img style='float:right;margin:4px'id='imgDemo' src='img/tanba.gif' title='IMG'/></div>";

	     	var infoWin = new BMap.InfoWindow(infoContent,{
	     		width : 200,     // 信息窗口宽度
			    height: 200,     // 信息窗口高度
			    title:"初始化标题",
//			    maxWidth:"10%",
	     	});
			//初始化--给标注添加信息窗口
	     	marker.openInfoWindow(infoWin);
	     	//监听标注，点击标注的时候弹出信息窗口
	     	marker.addEventListener('click', function(e) {
	     		//重新设置信息窗口内容
	     		infoWin.setContent(
	     			'<div class="infoWinBox"><div>重新设置之后的内容</div><div>重新设置之后的内容</div><div>重新设置之后的内容</div><div>重新设置之后的内容</div><div>重新设置之后的内容</div><div>重新设置之后的内容</div><div>重新设置之后的内容</div><div>重新设置之后的内容</div><div>重新设置之后的内容</div><div>重新设置之后的内容</div><div>重新设置之后的内容</div></div>',
	     			{
	     				width : 200,     // 信息窗口宽度
					    height: 400,     // 信息窗口高度
					    title:"重设之后的标题",
//					    maxWidth:"10%",
	     			}
	     		);
	     		
	     		marker.openInfoWindow(infoWin);
	     	});
	     	
		</script>
	</body>

</html>