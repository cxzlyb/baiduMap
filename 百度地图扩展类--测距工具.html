<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8" />
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<!--手机显示正常的声明-->
		<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
		<title>地图控件</title>
		<style type="text/css">
			html {
				height: 100%
			}
			
			body {
				height: 100%;
				margin: 0px;
				padding: 0px
			}
			
			#allmap {
				height: 100%
			}
		</style>

	</head>

	<body>
		<input type="button" value="开启" onclick="myDis.open();" />
		<input type="button" value="关闭" onclick="myDis.close()" />
		<div id="allmap"></div>
		<script src="http://api.map.baidu.com/api?v=3.0&ak=p8o0Z5O9SvVfwPP3z0DlAf2PiWOvKPEv" type="text/javascript" charset="utf-8"></script>
		<!--<script type="text/javascript" src="http://api.map.baidu.com/library/LuShu/1.2/src/LuShu_min.js"></script>-->
		<script type="text/javascript" src="http://api.map.baidu.com/library/DistanceTool/1.2/src/DistanceTool_min.js"></script>
		<script type="text/javascript">
			var map = new BMap.Map("allmap");
			map.enableScrollWheelZoom(true); //默认关闭鼠标缩放。重新设置true

			var point = new BMap.Point(116.417, 39.909);
			map.centerAndZoom(point, 18); //定中心
			
			var myDis = new BMapLib.DistanceTool(map);

			// 如果要调试事件接口，请打开下方屏蔽代码，
			// 在firefox或者chrome下查看调试信息
			
			//双击画完测距回调
			myDis.addEventListener("drawend", function(e) {
				console.log("drawend");
				console.log(e.points);
				console.log(e.overlays);
				console.log(e.distance);
			});
			
			//添加点的回调
			myDis.addEventListener("addpoint", function(e) {
				console.log("addpoint");
				console.log(e.point);
				console.log(e.pixel);
				console.log(e.index);
				console.log(e.distance);
			});
			
			//删除测距图的回调
			myDis.addEventListener("removepolyline", function(e) {
				console.log("removepolyline");
				console.log(e);
			});
			
			
		</script>
	</body>

</html>